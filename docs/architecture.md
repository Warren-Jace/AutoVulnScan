# AutoVulnScan 架构设计

本文档详细描述了 AutoVulnScan 系统的核心架构、模块划分和设计原则。

## 1. 设计哲学

AutoVulnScan 遵循以下设计哲学：

- **模块化**: 系统被划分为一系列高内聚、低耦合的模块，每个模块负责单一的功能。这使得系统易于维护、扩展和测试。
- **异步优先**: 核心扫描流程采用异步 I/O 模型，以实现高并发和高性能。
- **AI 赋能**: 在关键决策点（如 Payload 生成、响应分析）集成 AI 大模型，以提高扫描的智能化水平和准确性。
- **可扩展性**: 插件化的漏洞扫描框架允许开发者轻松添加新的漏洞检测能力。
- **配置驱动**: 扫描行为完全由外部配置文件驱动，为用户提供高度的灵活性。

## 2. 系统流程

系统工作流程如下图所示：

```mermaid
flowchart TD
  A[用户输入：目标URL与YAML/JSON配置] --> B{配置解析与验证};
  B --> C[初始化爬虫与URL队列];
  C --> D[爬虫模块：递归抓取所有页面];
  D --> E[动态/隐藏URL提取器：JS/DOM/API解析];
  E --> F[URL去重与规范化];
  F --> G[参数提取模块：识别所有可控参数];
  G --> H{循环处理每个参数};
  H --> I[AI辅助Payload生成器：根据参数和漏洞类型生成payload];
  I --> J[请求调度器：异步并发发送带payload请求];
  J --> K[响应分析器：传统规则匹配 + AI辅助异常检测];
  K --> L{漏洞判定};
  L -- 发现漏洞 --> M[漏洞结果收集];
  L -- 未发现漏洞/误报 --> N[更新扫描状态];
  M --> O[报告生成模块];
  N --> H;
  O --> P[输出报告];
  P --> Q[可选告警通知];
```

## 3. 模块详解

（此处将详细介绍每个模块的职责和技术实现）
